<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>5&nbsp; Síntesis de metilésteres – INFORME UVIGO AGROSOLVENTS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-99913b7803b80b0c1d2b970a25816663.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./parteii.html">Parte II</a></li><li class="breadcrumb-item"><a href="./sintesis-metilesteres.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Síntesis de metilésteres</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header sidebar-header-stacked">
      <a href="./index.html" class="sidebar-logo-link">
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="./">INFORME UVIGO AGROSOLVENTS</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Prógolo</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./prefacio.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Resumen ejecutivo</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./partei.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parte I</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Informe de Actividades de la UVIGO</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Ésteres Metílicos de Ácidos Grasos como Disolventes Verdes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./parteii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parte II</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./sintesis-metilesteres.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Síntesis de metilésteres</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reciclado.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Simulación de Planta de Reciclado de Biodiésel y DBEs mediante ATFE</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./parteiii.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Parte III</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fames.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Ésteres Metílicos de Ácidos Grasos como Disolventes Verdes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./parteii.html">Parte II</a></li><li class="breadcrumb-item"><a href="./sintesis-metilesteres.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Síntesis de metilésteres</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Síntesis de metilésteres</span></h1>
<p class="subtitle lead">Estudio Comparativo de la Síntesis de biodiésel a partir de aceite de palma y girasol</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="introducción" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="introducción"><span class="header-section-number">5.1</span> Introducción</h2>
<p>En el contexto de una creciente demanda energética global y la necesidad de mitigar el cambio climático, la búsqueda de combustibles alternativos se ha convertido en una prioridad. El biodiésel, definido como el conjunto de ésteres monoalquílicos derivados de aceites vegetales o grasas animales, emerge como una de las opciones más viables y sostenibles. Su carácter renovable, biodegradabilidad y perfil de emisiones reducido lo posicionan como un sustituto directo y complementario del diésel de origen fósil. A nivel mundial, los aceites de palma y girasol constituyen dos de las materias primas vegetales más significativas para su producción. Su relevancia está marcada por una fuerte distribución geográfica: el aceite de palma domina la producción en Asia, mientras que el aceite de girasol es una fuente importante y de creciente interés en Europa [1]. El objetivo de este informe técnico es analizar y comparar en profundidad los métodos de síntesis de metilésteres a partir de estos dos aceites. Se destacarán las diferencias críticas en el proceso, la cinética, la gestión de residuos y la calidad del producto final, enmarcadas en el desafío de ingeniería fundamental que cada uno presenta: la lucha del biodiésel de girasol contra la degradación química (oxidación) y la del biodiésel de palma contra el cambio de fase físico (cristalización). Este análisis permitirá comprender cómo las características intrínsecas de cada materia prima dictan las adaptaciones tecnológicas necesarias, comenzando por los fundamentos químicos que rigen su transformación.</p>
</section>
<section id="fundamentos-de-la-síntesis-de-los-metilésteres-de-acidos-grasos-biodiésel" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="fundamentos-de-la-síntesis-de-los-metilésteres-de-acidos-grasos-biodiésel"><span class="header-section-number">5.2</span> Fundamentos de la síntesis de los metilésteres de acidos grasos (biodiésel)</h2>
<p>Los aceites vegetales crudos no pueden ser utilizados directamente en motores diésel modernos debido principalmente a su alta viscosidad, que es entre 10 y 20 veces superior a la del petrodiésel [2, 3]. Esta elevada viscosidad provoca problemas de atomización en la inyección de combustible, combustión incompleta y la formación de depósitos de carbón en el motor [4]. Para superar estas limitaciones, es necesario un procesamiento químico que reduzca drásticamente su viscosidad. La transesterificación es, con diferencia, el método más extendido y comercialmente viable para lograr esta transformación, convirtiendo los triglicéridos (componentes principales del aceite) en ésteres alquílicos de menor viscosidad, conocidos comúnmente como biodiésel [3, 4].</p>
<p>2.1. El Proceso de Transesterificación</p>
<p>Desde el punto de vista químico, la transesterificación es una reacción en la que los triglicéridos de los aceites reaccionan con un alcohol de cadena corta, generalmente metanol por su bajo coste y reactividad, en presencia de un catalizador. Este proceso produce ésteres metílicos de ácidos grasos (FAME, por sus siglas en inglés), que constituyen el biodiésel, y glicerol como subproducto principal [3, 4, 5].</p>
<p>La reacción global se desarrolla en tres etapas consecutivas y reversibles. Primero, los triglicéridos (TG) se convierten en diglicéridos (DG), liberando una molécula de éster metílico. A continuación, los diglicéridos reaccionan para formar monoglicéridos (MG), liberando una segunda molécula de éster. Finalmente, los monoglicéridos se convierten en glicerol, generando la tercera y última molécula de éster metílico [6].</p>
<p>Para que esta reacción se produzca a una velocidad viable a nivel industrial, es imprescindible la presencia de un catalizador, existiendo diversas vías catalíticas para impulsar el proceso.</p>
<p>2.2. Vías Catalíticas Principales</p>
<p>La elección del catalizador es un factor determinante en el diseño del proceso, los costes de operación y la calidad del producto final. A continuación, se describen los principales enfoques catalíticos:</p>
<ul>
<li>Catálisis Homogénea Alcalina: Es el método preferido a escala industrial debido a su alta velocidad de reacción y bajo coste. Utiliza catalizadores como el hidróxido de sodio (NaOH) o el hidróxido de potasio (KOH) disueltos en el alcohol [5]. Su principal inconveniente es la alta sensibilidad al contenido de agua y ácidos grasos libres (AGL) en la materia prima. La presencia de estas impurezas provoca una reacción secundaria indeseada llamada saponificación (formación de jabón), que consume catalizador, reduce el rendimiento del biodiésel y complica significativamente la separación del glicerol [5, 7, 8].</li>
<li>Catálisis Homogénea Ácida: Emplea catalizadores como el ácido sulfúrico (H₂SO₄) y es una alternativa eficaz para materias primas con un alto contenido de AGL, ya que cataliza simultáneamente la esterificación de los AGL y la transesterificación de los triglicéridos. Sin embargo, la velocidad de reacción es considerablemente más lenta que la catálisis alcalina y presenta mayores problemas de corrosión en los equipos [3, 7].</li>
<li>Catálisis Heterogénea: Utiliza catalizadores sólidos, tanto ácidos como básicos (por ejemplo, óxidos metálicos). Esta vía simplifica la purificación del producto al facilitar la separación del catalizador mediante filtración, permite su reutilización y genera un glicerol de mayor pureza al evitar la formación de sales [1]. No obstante, puede presentar limitaciones por transferencia de masa entre las fases sólida y líquida [4].</li>
<li>Catálisis Enzimática: Representa una tecnología limpia y respetuosa con el medio ambiente que utiliza enzimas (lipasas) como catalizadores. Este método es capaz de procesar aceites con altos niveles de AGL y triglicéridos simultáneamente, operando en condiciones suaves de temperatura [9]. Históricamente, sus principales desventajas han sido el elevado coste de las enzimas y los largos tiempos de reacción, aunque la investigación continua busca superar estas barreras [5, 9].</li>
</ul>
<p>La selección de la vía catalítica está íntimamente ligada a las características de la materia prima. Por ello, un análisis detallado de la composición de los aceites de palma y girasol es fundamental para entender las particularidades de su procesamiento.</p>
<ol start="3" type="1">
<li>Comparativa de Materias Primas: Aceite de Palma vs.&nbsp;Aceite de Girasol</li>
</ol>
<p>La composición química intrínseca de cada aceite vegetal es el factor más determinante, ya que dicta no solo las propiedades del biodiésel resultante, sino también las adaptaciones necesarias en el proceso de producción. Las diferencias en el perfil de ácidos grasos entre el aceite de palma y el de girasol son el origen de dos desafíos de ingeniería opuestos: la estabilidad química para el biodiésel de girasol y la estabilidad física para el de palma.</p>
<p>3.1. Composición de Ácidos Grasos y su Impacto</p>
<p>La diferencia fundamental entre ambos aceites reside en su perfil de ácidos grasos. El aceite de palma se caracteriza por un alto contenido de ácidos grasos saturados, principalmente el ácido palmítico (C16:0). Por el contrario, el aceite de girasol es rico en ácidos grasos insaturados, con predominio del ácido linoleico (C18:2) y el ácido oleico (C18:1) [10, 11]. Esta distinción estructural tiene implicaciones directas en las propiedades del biodiésel.</p>
<p>La siguiente tabla resume la composición típica y su impacto en el combustible final:</p>
<p>Tipo de Ácido Graso Aceite de Palma (% aprox.) Aceite de Girasol (% aprox.) Impacto Principal en el Biodiésel Saturados (C16:0, C18:0) Alto (ej. Palmítico ~42%) Bajo Mejora la estabilidad oxidativa y el número de cetano, pero empeora las propiedades de flujo en frío. [11] Monoinsaturados (C18:1) Moderado Alto Buen equilibrio entre estabilidad y fluidez en frío. Poliinsaturados (C18:2, C18:3) Bajo Alto Mejora las propiedades de flujo en frío, pero reduce drásticamente la estabilidad oxidativa. [11]</p>
<p>Estas diferencias a nivel molecular se traducen directamente en las propiedades físico-químicas del combustible, afectando su comportamiento en el motor y durante el almacenamiento, como se detalla a continuación.</p>
<p>3.2. Propiedades Físico-Químicas del Biodiésel Derivado</p>
<p>El perfil de ácidos grasos de cada aceite define las características del biodiésel producido, conocido como PME (Palm Methyl Ester) para el de palma y SME (Sunflower Methyl Ester) para el de girasol.</p>
<ul>
<li>Propiedades de Flujo en Frío (Punto de Nube y Punto de Fluidez): Esta es la diferencia más crítica, representando el principal desafío físico para el PME. El alto contenido de ésteres saturados le confiere un punto de nube y un punto de fluidez muy elevados (por ejemplo, 15ºC y 14ºC respectivamente). Esto significa que los primeros cristales comienzan a formarse a 15ºC, lo que lo hace inadecuado para su uso en climas templados o fríos sin un tratamiento adicional [10]. En contraste, el SME, con su mayor grado de insaturación, presenta un comportamiento mucho mejor a bajas temperaturas [11].</li>
<li>Estabilidad Oxidativa: Este es el principal desafío químico para el SME. El mayor número de dobles enlaces en los ácidos grasos del girasol lo hace significativamente más susceptible a la oxidación. La oxidación degrada el combustible, aumentando su acidez y viscosidad, y puede llevar a la formación de gomas y sedimentos que obstruyen filtros e inyectores [5, 11]. Por su composición saturada, el PME es inherentemente más estable a la oxidación, lo que le confiere una mayor vida útil durante el almacenamiento [10].</li>
<li>Viscosidad y Densidad: Ambos tipos de biodiésel deben cumplir con los rangos especificados en los estándares internacionales para asegurar una correcta pulverización en el motor. Sin embargo, existen ligeras diferencias. Por ejemplo, un estudio sobre aceites de fritura usados reportó viscosidades dinámicas de 0.0060 Pa·s para el biodiésel de palma (WFPO) y de 0.0041 Pa·s para el de girasol (WFVO) [5]. Considerando las densidades del biodiésel reportadas en el mismo estudio (864 kg/m³ para el de palma y 863 kg/m³ para el de girasol), esto equivale a viscosidades cinemáticas de aproximadamente 6.9 mm²/s y 4.8 mm²/s, respectivamente, lo que sitúa al biodiésel de girasol dentro del rango típico de la norma EN 14214 (3.5-5.0 mm²/s).</li>
<li>Número de Cetano y Poder Calorífico: El número de cetano es un indicador de la calidad de ignición del combustible. Las cadenas de ácidos grasos más largas y saturadas se encienden más rápidamente en un motor diésel. En consecuencia, el PME presenta un mayor número de cetano y un poder calorífico superior en comparación con el SME, lo que se traduce en un mejor rendimiento de combustión [11].</li>
</ul>
<p>Estas propiedades divergentes obligan a adaptar el proceso de síntesis para cada materia prima con el fin de obtener un producto que cumpla con las especificaciones técnicas requeridas.</p>
<ol start="4" type="1">
<li>Adaptación del Proceso de Síntesis para Cada Aceite</li>
</ol>
<p>Aunque el proceso central de transesterificación es común para ambos aceites, las diferencias en su composición exigen modificaciones significativas en el proceso. Estas adaptaciones son soluciones de ingeniería diseñadas para mitigar las debilidades fundamentales de cada materia prima: la inestabilidad química del biodiésel de girasol y la inestabilidad física del biodiésel de palma.</p>
<p>4.1. Consideraciones del Proceso para Aceite de Girasol</p>
<p>La producción de biodiésel a partir de aceite de girasol puede considerarse un procedimiento relativamente estándar dentro de la catálisis alcalina, siempre que el aceite de partida tenga bajos niveles de acidez y agua. Estudios experimentales han demostrado que se pueden alcanzar altos rendimientos bajo ciertas condiciones; por ejemplo, en un estudio se observó el mayor rendimiento con una relación molar etanol:aceite de 10.2:1 y una concentración de catalizador (NaOH) del 1.5% en peso [8].</p>
<p>El factor crítico más importante es el control de la estabilidad oxidativa, la solución de ingeniería a su debilidad química. Debido a su alto contenido en ésteres poliinsaturados, el SME es propenso a la degradación durante el almacenamiento. Para cumplir con los requisitos de estabilidad a largo plazo, como el mínimo de seis meses estipulado por algunas normativas, a menudo es necesario añadir antioxidantes sintéticos al producto final [10, 11]. En contraste, el aceite de palma presenta un desafío de naturaleza física, relacionado con su comportamiento a bajas temperaturas.</p>
<p>4.2. Adaptaciones Críticas para Aceite de Palma: La Invernización (Winterization)</p>
<p>Para que el biodiésel de palma (PME) sea comercialmente viable en regiones con climas templados o fríos, es indispensable un paso de procesamiento adicional y crucial conocido como invernización (o winterization). Este proceso es la solución de ingeniería a su debilidad física, mejorando sus propiedades de flujo en frío [10, 12].</p>
<p>El proceso de invernización consiste en enfriar de manera controlada el biodiésel ya producido. Este enfriamiento provoca la cristalización selectiva de los componentes con puntos de fusión más altos, que son principalmente los ésteres metílicos de ácidos grasos saturados. Una vez formados los cristales, se separan del biodiésel líquido mediante un proceso de filtración [12, 13]. Para mejorar la eficiencia de esta separación y evitar la obstrucción de los filtros, es común el uso de coadyuvantes de filtración como la tierra de diatomeas (kieselgur), la perlita o, más recientemente, fibras de celulosa [12, 13].</p>
<p>Un ejemplo de aplicación industrial a gran escala es la planta de invernización de Sime Darby Biodiesel en Malasia, que produce “Winter Grade PME” (Biodiésel de Palma de Grado Invierno). Este producto tratado puede alcanzar un Punto de Obturación de Filtro en Frío (CFPP) de hasta -20°C, cumpliendo así con las exigentes normativas de invierno de países europeos [10].</p>
<p>Más allá de estas adaptaciones específicas, la optimización de la reacción de transesterificación para ambas materias primas se basa en un entendimiento profundo de su cinética y de los principios de ingeniería de procesos.</p>
<ol start="5" type="1">
<li>Cinética de la Reacción y Diseño de Proceso</li>
</ol>
<p>Comprender la cinética de la reacción y los principios de diseño de los equipos es fundamental para optimizar la producción de biodiésel a escala industrial. Este conocimiento permite maximizar el rendimiento, minimizar los tiempos de reacción, reducir los costes operativos y, en última instancia, asegurar la viabilidad económica del proceso.</p>
<p>5.1. Aspectos Cinéticos de la Transesterificación</p>
<p>La transesterificación, aunque se describe como un conjunto de tres reacciones reversibles, muestra un fuerte desplazamiento del equilibrio hacia la formación de productos (ésteres y glicerol), especialmente cuando se utiliza un exceso de alcohol. Los estudios cinéticos revelan que las constantes de velocidad de las reacciones directas son significativamente mayores que las de las reacciones inversas, lo que confirma que el proceso favorece la conversión casi completa de los triglicéridos [6].</p>
<p>Un mecanismo comúnmente aceptado para la reacción en un sistema por lotes propone dos regiones de control. Inicialmente, la reacción está limitada por la transferencia de masa, debido a la inmiscibilidad entre la fase oleosa (aceite) y la fase alcohólica (metanol y catalizador). En esta etapa, una agitación vigorosa, típicamente entre 400 y 1000 rpm, es crucial para crear una emulsión fina, aumentar el área interfacial y superar esta limitación [1, 4]. Una vez que se establece un contacto íntimo entre los reactivos, la reacción pasa a estar controlada cinéticamente, donde la velocidad depende de las concentraciones, la temperatura y la actividad del catalizador.</p>
<p>Datos específicos para la transesterificación de aceite de palma con KOH al 1% en peso, una relación molar metanol:aceite de 6:1 y una temperatura de 60°C, muestran un rápido aumento de la pureza del biodiésel al 94.3% en los primeros 2 minutos. El equilibrio de la reacción, con una pureza máxima del 99.1%, se alcanza en aproximadamente 20 minutos [6]. Diversos estudios han modelado con éxito esta reacción utilizando una cinética de segundo orden [4, 6]. Este conocimiento cinético es la base para el diseño y la operación del equipamiento de reacción.</p>
<p>5.2. Equipamiento y Diseño del Proceso por Lotes (Batch)</p>
<p>La producción de biodiésel a escala de laboratorio o piloto se realiza comúnmente en un reactor por lotes (batch reactor), cuyo diseño permite un control preciso de las variables de reacción. Un montaje típico incluye los siguientes componentes:</p>
<ul>
<li>Reactor de vidrio sellado: Permite la observación visual de la reacción y soporta las condiciones de operación.</li>
<li>Agitador mecánico: Esencial para garantizar una mezcla homogénea y superar las limitaciones de transferencia de masa.</li>
<li>Termómetro digital: Para monitorizar y controlar la temperatura de reacción.</li>
<li>Puerto de muestreo: Permite la extracción de alícuotas a lo largo del tiempo para seguir el progreso de la reacción.</li>
<li>Baño de agua de circulación: Proporciona un control de temperatura preciso y uniforme para el reactor [6].</li>
</ul>
<p>El procedimiento operativo general comienza con la carga del aceite en el reactor y su calentamiento hasta la temperatura deseada. A continuación, se añade la solución de metóxido (metanol premezclado con el catalizador disuelto) y se inicia la agitación. La reacción transcurre bajo temperatura y agitación constantes durante un tiempo predeterminado. Finalmente, se detiene la reacción y se toman muestras para su análisis [6]. A escala industrial, los principios son los mismos, pero se utilizan reactores de acero de gran volumen, como los que se observan en instalaciones comerciales [10], manteniendo un control riguroso sobre los factores operativos para garantizar la eficiencia y la calidad del producto.</p>
<ol start="6" type="1">
<li>Factores Críticos, Gestión de Residuos y Calidad del Producto</li>
</ol>
<p>La optimización del proceso de producción de biodiésel no se centra únicamente en maximizar el rendimiento de la reacción. También es crucial el control riguroso de las variables operativas que afectan directamente la calidad del producto, la gestión eficiente de los subproductos y el cumplimiento de las estrictas normativas de calidad internacionales.</p>
<p>6.1. Influencia de las Variables de Proceso en el Rendimiento</p>
<p>Las principales variables del proceso de transesterificación y su efecto sobre el rendimiento y la calidad del biodiésel se detallan a continuación:</p>
<ul>
<li>Relación Molar Alcohol:Aceite: La transesterificación es una reacción de equilibrio. Para desplazarla hacia la formación de ésteres y maximizar la conversión, se utiliza un exceso estequiométrico de alcohol. Las relaciones molares de alcohol a aceite comúnmente empleadas en la práctica industrial varían entre 6:1 y 12:1 [5, 6, 14].</li>
<li>Concentración y Tipo de Catalizador: La cantidad de catalizador (generalmente entre 0.5% y 1.5% en peso respecto al aceite) tiene un impacto directo en la velocidad de reacción. Una concentración insuficiente resulta en una conversión incompleta. Por el contrario, un exceso de catalizador alcalino puede favorecer la formación de jabón, lo que reduce el rendimiento y complica la etapa de purificación [5, 8].</li>
<li>Temperatura de Reacción: El aumento de la temperatura acelera la velocidad de reacción. Sin embargo, para procesos a presión atmosférica, la temperatura debe mantenerse por debajo del punto de ebullición del alcohol utilizado (aproximadamente 60-65°C para el metanol) para evitar su evaporación [5, 6].</li>
<li>Contenido de Agua y Ácidos Grasos Libres (AGL): Este es uno de los factores más críticos para la catálisis homogénea alcalina. La presencia de agua y AGL reacciona con el catalizador en una reacción de saponificación, consumiéndolo y formando jabones. Estos jabones actúan como emulsionantes, dificultando enormemente la separación por gravedad del biodiésel y el glicerol [5, 7].</li>
</ul>
<p>Una vez completada la reacción, la gestión adecuada del principal subproducto generado, el glicerol, es esencial para la sostenibilidad del proceso.</p>
<p>6.2. Generación y Gestión de Residuos</p>
<ul>
<li>Glicerol Crudo: Es el principal subproducto del proceso, generándose en una proporción aproximada de 10 kg por cada 100 kg de biodiésel producido [15]. El glicerol crudo no es puro; está contaminado con el exceso de metanol, el catalizador neutralizado (sales), jabones, agua y trazas de aceite sin reaccionar [7, 15]. Su gestión es clave para la economía del proceso.
<ul>
<li>Purificación y Valorización: El glicerol crudo puede ser refinado para alcanzar una alta pureza (&gt;99.5%). Este proceso suele implicar una acidificación para convertir los jabones en AGL y una posterior destilación para eliminar impurezas. El glicerol purificado es un producto de alto valor añadido con aplicaciones en las industrias farmacéutica, cosmética y alimentaria [15, 16].</li>
<li>Usos Directos y Conversión: Incluso en su forma cruda, el glicerol puede ser valorizado. Puede utilizarse para producir otros productos químicos como polialcoholes, polioles o como materia prima para la síntesis de catalizadores de carbono [7, 15]. Una diferencia notable es que la transesterificación del aceite de palma con metóxido de sodio tiende a producir jabones “duros” que pueden solidificar y complicar el procesamiento, a diferencia de los jabones “blandos” formados a partir de catalizadores de potasio [7].</li>
</ul></li>
<li>Torta de Filtración: Específico del proceso de invernización del biodiésel de palma, se genera una torta de filtración compuesta por ésteres saturados y el coadyuvante de filtración. El uso de coadyuvantes a base de celulosa permite que esta torta sea utilizada como componente en la alimentación de ganado, convirtiendo un residuo en un subproducto de valor [13].</li>
</ul>
<p>La correcta gestión del proceso y sus residuos es un prerrequisito para alcanzar la calidad final exigida al biodiésel.</p>
<p>6.3. Control de Calidad y Cumplimiento de Estándares</p>
<p>Para que el biodiésel pueda ser comercializado y utilizado en motores diésel sin riesgo, debe cumplir con especificaciones rigurosas, definidas en estándares internacionales como ASTM D6751 en Estados Unidos y EN 14214 en Europa [5, 17]. Estos estándares establecen límites para parámetros físico-químicos que garantizan el rendimiento, la seguridad y la durabilidad del motor.</p>
<p>La siguiente tabla resume algunos de los parámetros de calidad más importantes:</p>
<p>Parámetro de Calidad Importancia Límite Típico (EN 14214) Contenido de Éster Mide la pureza del biodiésel y el grado de conversión de la reacción. Un bajo contenido indica una reacción incompleta. Mín. 96.5 % en peso [6] Viscosidad Cinemática Afecta la atomización del combustible en el inyector. Una viscosidad demasiado alta causa depósitos; demasiado baja reduce la lubricidad. [2] 3.5 - 5.0 mm²/s a 40°C Punto de Inflamación Indica la temperatura mínima para la ignición de los vapores. Es una medida clave de seguridad y un indicador del contenido residual de metanol. [2] Mín. 101°C Valor de Ácido Mide los AGL residuales y los productos de la oxidación. Un valor alto indica un potencial de corrosión para los componentes del motor. [5] Máx. 0.50 mgKOH/g Glicerol (Libre y Total) El exceso de glicerol y de glicéridos parciales puede causar depósitos en el motor y la obstrucción de filtros. Máx. 0.02% / 0.25% [10] CFPP (Punto de Obturación de Filtro en Frío) Parámetro clave para la operatividad en climas fríos. El límite varía estacionalmente en la norma para adaptarse a las condiciones ambientales. [10] ej. Máx. -20°C (Invierno)</p>
<p>Un control de calidad riguroso en todas las etapas del proceso, desde la selección de la materia prima hasta la purificación final, es indispensable para producir un biodiésel que cumpla con estos exigentes estándares.</p>
<ol start="7" type="1">
<li>Conclusiones</li>
</ol>
<p>Este estudio comparativo revela que tanto el aceite de palma como el de girasol son materias primas viables para la producción de biodiésel de alta calidad, siempre que el proceso de síntesis se adapte meticulosamente para resolver los desafíos de ingeniería fundamentales de cada uno. La elección de la materia prima impone requisitos tecnológicos específicos que deben ser abordados para que el producto final cumpla con los estándares internacionales.</p>
<p>La principal conclusión se centra en el trade-off fundamental entre la estabilidad química y la física, dictado por el perfil de ácidos grasos:</p>
<ul>
<li>El biodiésel de girasol, rico en ésteres insaturados, enfrenta un desafío de estabilidad química (oxidación). Aunque posee excelentes propiedades de flujo en frío, requiere la adición de antioxidantes como solución de ingeniería para garantizar una vida útil adecuada.</li>
<li>El biodiésel de palma, con su alto contenido de ésteres saturados, enfrenta un desafío de estabilidad física (cristalización). Posee una excelente estabilidad oxidativa y un alto número de cetano, pero su pobre comportamiento a bajas temperaturas exige la implementación de un proceso de invernización como solución de ingeniería para ser funcional en climas templados y fríos.</li>
</ul>
<p>En definitiva, la elección entre ambas materias primas no se basará en una superioridad técnica absoluta, sino en una combinación de factores geográficos, climáticos, económicos y de la infraestructura de procesamiento disponible. Con la aplicación de las tecnologías adecuadas, tanto el aceite de palma como el de girasol pueden contribuir de manera significativa y complementaria a la diversificación de la matriz energética.</p>
<ol start="8" type="1">
<li><p>Bibliografía</p></li>
<li><p>Janajreh, I., et al.&nbsp;“Influence on process parameters in transesterification of vegetable and waste oil-A review.” IJRRAS 10.1 (2012).</p></li>
<li><p>Demirbaş, A. “Biodiesel production from vegetable oils and fats with high free fatty acids.” Energy Conversion and Management 46.5 (2005): 779-786.</p></li>
<li><p>Demirbaş, A. “Biodiesel: The Use of Vegetable Oils and Their Derivatives as Alternative Diesel Fuels.” Energy Conversion and Management 44.17 (2003): 2741-2759.</p></li>
<li><p>Noureddini, H., &amp; Zhu, D. “Kinetics of transesterification of soybean oil with methanol.” JAOCS 74.11 (1997): 1457-1463.</p></li>
<li><p>Adewale, P., et al.&nbsp;“Evaluation of Process Parameters for Biodiesel Production from Vegetable and Palm Waste Frying Oils Using a Homogeneous Catalyst.” Creative Commons Attribution International License (2017).</p></li>
<li><p>Theerayut, L., et al.&nbsp;“A Second Order Kinetics of Palm Oil Transesterification.” ResearchGate (2007).</p></li>
<li><p>“Characterization of crude glycerol and glycerol pitch from palm-based residual biomass.” PMC, National Center for Biotechnology Information.</p></li>
<li><p>Sales, A. “Production of biodiesel from sunflower oil and ethanol by base catalysed transesterification.” MSc Thesis, KTH Royal Institute of Technology (2011).</p></li>
<li><p>“Enzymatic Process for Biodiesel and Biobased Material Production.” MPOB Information Series.</p></li>
<li><p>“Chapter 4 Biodiesel Fuel Quality.” Economic Research Institute for ASEAN and East Asia (ERIA).</p></li>
<li><p>Boichenko, S., et al.&nbsp;“Physical, Chemical, and Performance Properties of Biodiesel Fuels: A Comparative Study of Lipid-Based Feedstocks.” Energies 18.16 (2025): 4274.</p></li>
<li><p>Ergönül, P. G., &amp; Nergiz, C. “The effect of different filter aid materials and winterization periods on the oxidative stability of sunflower and corn oils.” Grasas y Aceites 66.1 (2015): e062.</p></li>
<li><p>Lužaić, T., et al.&nbsp;“Implementation of Cellulose-Based Filtration Aids in Industrial Sunflower Oil Dewaxing (Winterization): Process Monitoring, Prediction, and Optimization.” Foods 13.18 (2024): 2960.</p></li>
<li><p>Rashmi, W., et al.&nbsp;“Removal of residual catalyst from palm oil-based biodiesel using new ionic liquids analogous.” Journal of Engineering Science and Technology 10.4 (2015): 458-470.</p></li>
<li><p>“Comparative Analysis of Synthesis Pathways, Kinetic Imperatives, and Process Engineering for Palm and Sunflower Oil Methyl Esters.” Source document. Note: Refers to Zaharudin, et al.&nbsp;for glycerol generation data.</p></li>
<li><p>Zaharudin, et al.&nbsp;“Evaluation on the Large Scale Glycerol Production from Used Cooking Oil using SuperPro Designer Simulator.” ResearchGate (2022).</p></li>
<li><p>“Biodiesel Standards &amp; Properties.” DieselNet.</p></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>